appId: com.transcriptai.app
productName: TranscriptAI
directories:
  output: dist
files:
  - from: .
    filter:
      - package.json
      - src/**
extraResources:
  # Include the built frontend (relative to desktop/ when running builder)
  - from: ../frontend/dist
    to: frontend_dist
  # Include prebuilt backend (directory for --onedir or binary for --onefile)
  # Place backend directory or binary under backend/bin before packaging
  - from: ../backend/bin
    to: backend
    filter:
      - "**/*"
  # Include cache manager for PyInstaller bundle caching
  - from: ../backend/pyinstaller_cache_manager.js
    to: backend/pyinstaller_cache_manager.js
  # Include MLX virtual environment (Option A packaging)
  - from: ../venv_mlx
    to: venv_mlx
    filter:
      - "**/*"
      - "!**/__pycache__/**"
      - "!**/*.pyc"
      - "!**/*.pyo"
      - "!**/tests/**"
      - "!**/test/**"
      - "!**/*.tests/**"
      - "!**/*.md"
      - "!**/*.rst"
      - "!**/.git/**"
      - "!**/*.dist-info/**"
  # Include Whisper model cache for offline transcription (only tiny.pt)
  - from: ../backend/whisper_cache/whisper
    to: whisper_cache/whisper
    filter:
      - "tiny.pt"
  # Include native helper for global key listener (macOS)
  - from: node_modules/node-global-key-listener/bin
    to: bin
beforePack: ../scripts/fix-mlx-rpath.sh
mac:
  target: [dmg]
  category: public.app-category.productivity
  compression: maximum
win:
  target: [nsis]
  compression: maximum
asar: true
publish:
  provider: github
  owner: sbpk516
  repo: transcriptai
  releaseType: draft
